<div class="chart-header">
  <button class="toggle-btn" (click)="toggleChartType()">
    {{ chartType === 'bar' ? (app.translations['switch_to_line_chart'] || 'Switch to Line Chart') : (app.translations['switch_to_bar_chart'] || 'Switch to Bar Chart') }}
  </button>
</div>

<div class="big-chart">
  <canvas baseChart
          [data]="criteriaSummaryChartData"
          [type]="chartType"
          [options]="chartOptions">
  </canvas>
</div>

<div class="results-lists">

  <div class="passed-list">
    <h3><span class="translate" data-translate="passed_projects">Passed projects</span> ({{ passedProjects.length }})</h3>
    <ul>
      <li *ngFor="let p of passedProjects">{{ p }}</li>
    </ul>
  </div>

  <div class="failed-list">
    <h3><span class="translate" data-translate="failed_projects">Failed projects</span> ({{ failedProjects.length }})</h3>
    <ul>
      <li *ngFor="let p of failedProjects">{{ p }}</li>
    </ul>
  </div>

</div>


<div class="projects-wrapper">
  <div class="project-card"
       *ngFor="let p of projects"
       (click)="openProject(p)">
    {{ p.name }}
  </div>
</div>

<!-- sekcja szczegółów po kliknięciu -->
<div *ngIf="selectedProject" class="details-wrapper">

  <h2><span class="translate" data-translate="project_details">Project Details</span>: {{ selectedProject.name }}</h2>

  <div class="charts-container">
    <div class="chart-box">
      <h3 class="translate" data-translate="first_semester_grade">First Semester Grade</h3>
      <canvas baseChart
              [data]="firstSemesterChartData"
              [options]="chartOptions"
              [type]="chartType">
      </canvas>
    </div>

    <div class="chart-box">
      <h3 class="translate" data-translate="second_semester_grade">Second Semester Grade</h3>
      <canvas baseChart
              [data]="secondSemesterChartData"
              [options]="chartOptions"
              [type]="chartType">
      </canvas>
    </div>
  </div>

  <hr>

  <div class="info-box">
    <h3 class="translate" data-translate="information_about_project">Information about the project</h3>
    <p><b class="translate" data-translate="name">Name:</b> {{ selectedProject.name }}</p>
    <p><b class="translate" data-translate="supervisor">Supervisor:</b> {{ selectedProject.supervisor.name }}</p>
    <p><b class="translate" data-translate="accepted">Accepted:</b> {{ selectedProject.accepted ? (app.translations['yes'] || 'Tak') : (app.translations['no'] || 'Nie') }}</p>
    <p><b class="translate" data-translate="criteria_met">Criteria Met:</b> {{ selectedProject.criteriaMet ? (app.translations['yes'] || 'Tak') : (app.translations['no'] || 'Nie') }}</p>
    <p><b class="translate" data-translate="grading_phase">Grading Phase:</b> {{ selectedProject.evaluationPhase }}</p>
    <p><b class="translate" data-translate="students">Students:</b> {{ selectedProject.students }}</p>
    <p><b class="translate" data-translate="room">Room:</b> {{ selectedProject.classroom || (app.translations['none'] || 'Brak') }}</p>
    <p><b class="translate" data-translate="defence_date">Defence Date:</b> {{ selectedProject.defenseDay || (app.translations['none'] || 'Brak') }}</p>
  </div>

  <h2 class="translate" data-translate="semester_1">SEMESTER 1</h2>

  <div class="charts-row">
    <div class="chart-box small-chart">
      <h3 class="translate" data-translate="expected">Expected</h3>
      <canvas baseChart
              [data]="expectedFirst"
              [options]="chartOptions"
              [type]="chartType">
      </canvas>
    </div>

    <div class="chart-box small-chart">
      <h3 class="translate" data-translate="required">Required</h3>
      <canvas baseChart
              [data]="requiredFirst"
              [options]="chartOptions"
              [type]="chartType">
      </canvas>
    </div>

    <div class="chart-box small-chart">
      <h3 class="translate" data-translate="measureable_indicators">Measureable Indicators</h3>
      <canvas baseChart
              [data]="measurableFirst"
              [options]="chartOptions"
              [type]="chartType">
      </canvas>
    </div>
  </div>

  <h2 class="translate" data-translate="semester_2">SEMESTER 2</h2>

  <div class="charts-row">
    <div class="chart-box small-chart">
      <h3 class="translate" data-translate="expected">Expected</h3>
      <canvas baseChart
              [data]="expectedSecond"
              [options]="chartOptions"
              [type]="chartType">
      </canvas>
    </div>

    <div class="chart-box small-chart">
      <h3 class="translate" data-translate="required">Required</h3>
      <canvas baseChart
              [data]="requiredSecond"
              [options]="chartOptions"
              [type]="chartType">
      </canvas>
    </div>

    <div class="chart-box small-chart">
      <h3 class="translate" data-translate="measureable_indicators">Measureable Indicators</h3>
      <canvas baseChart
              [data]="measurableSecond"
              [options]="chartOptions"
              [type]="chartType">
      </canvas>
    </div>
  </div>

</div>
